<div class="row">
    <div class="container-fluid">
        <div class="row-fluid">
            <div ng-show="user" class="col-md-2 breadcrumb">
                <p><h4> <a href="/#/profil/{{user.id}}">{{user.fullname}}</a></h4></p>
                <p>{{user.email}}</p>
                <hr/>
                <img ng-src="{{user.avatar}}?s=100">
                <hr/>
                <p>
                    <a href="#/settings/account" class="btn btn-primary">Editer votre profil</a>
                </p>
            </div>
            <div ng-include src="views/header.html"></div>
            <div class="col-md-10">
                <div class="well">
                    <h2>DASHBOARD</h2><br>

                    <div class="alert alert-error" ng-show="user && !user.email" ng-cloak class="ng-cloak">
                        Merci de renseigner votre email sur votre <a href="/#/settings/email">profil</a> pour qu'on
                        puisse vous contacter.
                    </div>
                </div>
                <br/>

                <div class="well">
                    <div ng-show="userService.isAdmin()">
                        <legend>Status</legend>

                        <table class="table table-bordered table-striped">
                            <tbody>
                            <tr>
                                <th class="col-md-2">Propositions (Draft)</th>
                                <th class="col-md-2">Proposals soumis</th>
                                <th class="col-md-2">Proposals rejetés</th>
                                <th class="col-md-2">Proposals acceptés</th>
                                <th class="col-md-2">Proposals en attente</th>
                                <th class="col-md-2">Vos Votes</th>
                            </tr>
                            <tr>
                                <td>{{proposalstats.nbProposalDraft}}</td>
                                <td>{{proposalstats.nbProposals}}</td>
                                <td>{{proposalstats.nbRejetes}} / {{proposalstats.nbProposals}}</td>
                                <td>{{proposalstats.nbAcceptes}} / {{proposalstats.nbProposals}}</td>
                                <td>{{proposalstats.nbProposals - proposalstats.nbRejetes -
                                    proposalstats.nbAcceptes}} / {{proposalstats.nbProposals}}
                                </td>
                                <td>{{proposalstats.nbVotesUser}} / {{proposalstats.nbProposals}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <br/>

                    <div ng-show="user.isInfoValid">
                        <legend>Vos Proposals</legend>
                        <p>
                            <span class="badge badge-important" ng-repeat="error in errors['']">{{error}}</span>
                        </p>
                        <table class="table table-bordered table-striped" ng-show="proposals.length >0">
                            <tbody>

                            <tr>
                                <th class="col-md-4"><a ng-click="predicate = 'title'; reverse=!reverse">Titre</a></th>
                                <th class="col-md-4">Présentateur(s)</th>
                                <th><a ng-click="predicate = 'draft'; reverse=!reverse">Etat</a></th>
                                <th class="col-md-2">Soumettre</th>
                                <th class="col-md-2">Status</th>
                                <th class="col-md-3">Action(s)</th>
                            </tr>
                            <tr ng-repeat="proposal in proposals | orderBy:predicate:reverse ">
                                <td><a href="/#/proposals/see/{{proposal.id}}">{{proposal.title}}</a></td>
                                <td><a href="/#/profil/{{user.id}}">{{user.fullname}}</a>

                                    <p ng-repeat="coSpeaker in proposal.coSpeakers">
                                        <a href="/#/profil/{{coSpeaker.id}}">{{coSpeaker.fullname}}</a>
                                    </p></td>
                                <td><p ng-show="proposal.draft">Draft</p>

                                    <p ng-show="!proposal.draft">Soumis</p></td>
                                <td><p ng-show="proposal.draft"><a ng-click="submitProposal(proposal)">Soumettre</a></p></td>
                                <td>{{proposal.statusProposal}}</td>
                                <td><a href="#/editproposal/{{proposal.id}}"><i class="icon-pencil"></i></a>
                                    <a ng-click="deleteProposal(proposal)"><i class="icon-remove"></i></a></td>
                            </tr>
                            </tbody>
                        </table>
                        <p  ng-show="proposals.length == 0">Aucun Proposal</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>